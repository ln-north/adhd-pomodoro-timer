(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2731:(e,t,l)=>{Promise.resolve().then(l.bind(l,3528))},3528:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>c});var n=l(5155),a=l(2115);let s=e=>{let{time:t,label:l,description:s,isSelected:r,isRunning:o,isShouldReset:c,onComplete:i}=e,[u,d]=(0,a.useState)(t),[m,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e;let l=()=>{if(null!==m&&o&&r){let l=t-Math.floor((Date.now()-m)/1e3);d(l>0?l:0),l<=0&&(clearInterval(e),i(),x(null))}null===m&&x(Date.now())};return o&&r&&(l(),e=setInterval(l,10)),()=>{e&&clearInterval(e)}},[o,r,m]),(0,a.useEffect)(()=>{c&&(d(t),x(null))},[c,t]);let p=100-u/t*100;return(0,n.jsxs)("div",{className:"h-16 px-4 flex items-center justify-center rounded-lg transition-all duration-300 relative overflow-clip bg-gray-50 ".concat(!r&&o?"opacity-50":""," ").concat(r?"outline outline-2 outline-indigo-500":""),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center w-full z-10",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("span",{className:"text-lg text-gray-700",children:l}),s&&(0,n.jsx)("span",{className:"text-xs text-gray-500",children:s})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsx)("span",{className:"text-lg text-gray-700",children:function(e){let t=Math.floor(e/3600),l=Math.floor(e%3600/60),n=Math.floor(e%60),a=[];return t>0&&a.push("".concat(t,"時間")),l>0&&a.push("".concat(l,"分")),(n>0||0===a.length)&&a.push("".concat(n,"秒")),a.join("")}(u)}),m&&(0,n.jsx)("span",{className:"text-xs text-gray-500",children:function(e){let t=new Date(e),l=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return"".concat(l,"時").concat(n,"分").concat(a,"秒")}(m)})]})]}),(0,n.jsx)("div",{className:"absolute top-0 left-0 h-full transition-all duration-300 ".concat(r?"bg-blue-200":"bg-blue-100"),style:{width:"".concat(p,"%")}})]})},r="/adhd-pomodoro-timer",o=[{time:60,label:"タスク決め",type:"preparation",sound:"bell.mp3",gradient:"from-orange-500 to-yellow-500"},{time:780,label:"作業",type:"working",sound:"completed.mp3",gradient:"from-blue-500 to-cyan-500"},{time:60,label:"振り返り",type:"review",sound:"bell.mp3",gradient:"from-orange-500 to-yellow-500"},{time:300,label:"休憩",type:"relaxing",sound:"bell.mp3",gradient:"from-green-500 to-emerald-500"}];function c(){let[e,t]=(0,a.useState)(!1),[l,r]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(0),[g,f]=(0,a.useState)(o),[h,y]=(0,a.useState)([]),b=(0,a.useRef)(""),[j,v]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),S=()=>{r(!0),t(!0),i("start.mp3")},k=()=>{if(x<g.length-1){let e=g[x];y(t=>[...t,{label:e.label,type:e.type,time:e.time,comment:b.current}]),v(""),b.current="",p(e=>e+1),i(e.sound),c&&m(!1)}else M(),S()},C=e=>t=>{f(l=>{let n=[...l];return n[e].time=t,n})},M=()=>{r(!1),t(!1),p(0),f(o.concat()),m(!0)};return(0,a.useEffect)(()=>{console.log("comment",j),console.log("commentRef.current",b.current)},[j]),(0,a.useEffect)(()=>{["start.mp3","pause.mp3","bell.mp3","complete.mp3"].map(e=>u(e))},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br ".concat(l?g[x].gradient:"from-gray-400 to-gray-600"," flex items-center justify-center px-4 ").concat(w?"filter blur-sm":""),children:(0,n.jsxs)("div",{className:"max-w-md w-full",children:[(0,n.jsx)("div",{className:"space-y-4 mb-8",children:g.map((e,t)=>{var r;return(0,n.jsx)(a.Fragment,{children:(0,n.jsx)(s,{time:e.time,label:e.label,description:t===x?null===(r=h[h.length-1])||void 0===r?void 0:r.comment:void 0,isSelected:t===x,isRunning:l,isShouldReset:c,onComplete:k,onChangeTime:C(t)})},t)})}),(0,n.jsx)("div",{className:"flex flex-col items-center space-y-4 mb-8",children:(0,n.jsxs)("div",{className:"flex justify-center space-x-4",children:[!l&&(0,n.jsx)("button",{onClick:S,className:"w-36 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium",children:e?"再開":"スタート"}),l&&(0,n.jsx)("button",{onClick:()=>{r(!1),i("pause.mp3")},className:"w-36 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 font-medium",children:"一時停止"}),(0,n.jsx)("button",{onClick:()=>N(!0),className:"w-36 px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors duration-200 font-medium",children:"ログを表示"})]})}),(0,n.jsx)("div",{className:"flex flex-col items-center space-y-4",children:(0,n.jsx)("input",{onInput:e=>{b.current=e.target.value,v(e.target.value)},value:j,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"preparation"===g[x].type?"やることを入力":"review"===g[x].type?"振り返りを入力":void 0})})]})}),w&&(0,n.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full bg-opacity-75 bg-gray-900 flex flex-col items-center justify-center",children:[(0,n.jsx)("ul",{className:"max-w-xs w-full",children:h.map((e,t)=>(0,n.jsx)("li",{className:"p-2 rounded-md",children:(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsxs)("p",{className:"text-xs",children:[(0,n.jsx)("span",{className:"text-gray-50",children:e.label}),(0,n.jsxs)("span",{className:"text-gray-300",children:["（",d(e.time),"）"]}),e.comment&&(0,n.jsxs)("span",{className:"text-gray-50",children:["：",e.comment]})]})})},t))}),(0,n.jsxs)("div",{className:"mt-4 text-gray-50 text-xs",children:["合計作業時間：",d(h.reduce((e,t)=>"working"===t.type?e+t.time:e,0))]}),(0,n.jsx)("button",{onClick:()=>N(!1),className:"mt-4 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 font-medium",children:"閉じる"})]})]})}let i=e=>{new Audio("".concat(r,"/sounds/").concat(e)).play().catch(e=>{console.warn("Audio playback failed:",e)})},u=e=>{let t=new Audio("".concat(r,"/sounds/").concat(e));return t.preload="auto",t.load(),t};function d(e){let t=Math.floor(e/3600),l=Math.floor(e%3600/60),n=Math.floor(e%60),a=[];return t>0&&a.push("".concat(t,"時間")),l>0&&a.push("".concat(l,"分")),(n>0||0===a.length)&&a.push("".concat(n,"秒")),a.join("")}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(2731)),_N_E=e.O()}]);