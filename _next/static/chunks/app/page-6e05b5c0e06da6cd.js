(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8360:(e,t,l)=>{Promise.resolve().then(l.bind(l,3528))},3528:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var n=l(5155),r=l(2115);let a=e=>{let{time:t,label:l,description:a,isSelected:s,isRunning:c,isShouldReset:o,onComplete:i}=e,[u,d]=(0,r.useState)(t),m=(0,r.useRef)(null),x=(0,r.useRef)(0),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{o&&(d(t),m.current=null,x.current=0)},[o,t]),(0,r.useEffect)(()=>{if(c&&s)null===m.current&&(m.current=Date.now()),p.current||(p.current=setInterval(()=>{if(null!==m.current){let e=Date.now(),l=Math.max(t-Math.floor((x.current+(e-m.current))/1e3),0);d(l),l<=0&&(p.current&&(clearInterval(p.current),p.current=null),i())}},50));else{if(null!==m.current){let e=Date.now();x.current+=e-m.current,m.current=null}p.current&&(clearInterval(p.current),p.current=null)}return()=>{p.current&&(clearInterval(p.current),p.current=null)}},[c,s,t,i]),(0,r.useEffect)(()=>{o&&d(t)},[o,t]);let f=100-u/t*100;return(0,n.jsxs)("div",{className:"h-16 px-4 flex items-center justify-center rounded-lg transition-all duration-300 relative overflow-clip bg-gray-50 ".concat(!s&&c?"opacity-50":""," ").concat(s?"outline outline-2 outline-indigo-500":""),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center w-full z-10",children:[(0,n.jsxs)("div",{className:"flex flex-col items-start",children:[(0,n.jsx)("span",{className:"text-lg text-gray-700",children:l}),a&&(0,n.jsx)("span",{className:"text-xs text-gray-500",children:a})]}),(0,n.jsx)("div",{className:"flex flex-col items-end",children:(0,n.jsx)("span",{className:"text-lg text-gray-700",children:function(e){let t=Math.floor(e/3600),l=Math.floor(e%3600/60),n=Math.floor(e%60),r=[];return t>0&&r.push("".concat(t,"時間")),l>0&&r.push("".concat(l,"分")),(n>0||0===r.length)&&r.push("".concat(n,"秒")),r.join("")}(u)})})]}),(0,n.jsx)("div",{className:"absolute top-0 left-0 h-full transition-all duration-300 ".concat(s?"bg-blue-200":"bg-blue-100"),style:{width:"".concat(f,"%")}})]})},s="/adhd-pomodoro-timer",c=[{time:60,label:"タスク決め",type:"preparation",sound:"bell.mp3",gradient:"from-orange-500 to-yellow-500"},{time:780,label:"作業",type:"working",sound:"completed.mp3",gradient:"from-blue-500 to-cyan-500"},{time:60,label:"振り返り",type:"review",sound:"bell.mp3",gradient:"from-orange-500 to-yellow-500"},{time:300,label:"休憩",type:"relaxing",sound:"bell.mp3",gradient:"from-green-500 to-emerald-500"}];function o(){let[e,t]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),[x,p]=(0,r.useState)(0),[f,h]=(0,r.useState)(c),[g,b]=(0,r.useState)([]),y=(0,r.useRef)(""),[j,v]=(0,r.useState)(""),[w,N]=(0,r.useState)(!1),k=()=>{s(!0),t(!0),i("start.mp3")},S=()=>{if(x<f.length-1){let e=f[x];b(t=>[...t,{label:e.label,type:e.type,time:e.time,comment:y.current}]),v(""),y.current="",p(e=>e+1),i(e.sound),o&&m(!1)}else M(),k()},C=e=>t=>{h(l=>{let n=[...l];return n[e].time=t,n})},M=()=>{s(!1),t(!1),p(0),h(c.concat()),m(!0)};return(0,r.useEffect)(()=>{["start.mp3","pause.mp3","bell.mp3","complete.mp3"].map(e=>u(e))},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br ".concat(l?f[x].gradient:"from-gray-400 to-gray-600"," flex items-center justify-center px-4 ").concat(w?"filter blur-sm":""),children:(0,n.jsxs)("div",{className:"max-w-md w-full",children:[(0,n.jsx)("div",{className:"space-y-4 mb-8",children:f.map((e,t)=>{var s;return(0,n.jsx)(r.Fragment,{children:(0,n.jsx)(a,{time:e.time,label:e.label,description:t===x?null===(s=g[g.length-1])||void 0===s?void 0:s.comment:void 0,isSelected:t===x,isRunning:l,isShouldReset:o,onComplete:S,onChangeTime:C(t)})},t)})}),(0,n.jsx)("div",{className:"flex flex-col items-center space-y-4 mb-8",children:(0,n.jsxs)("div",{className:"flex justify-center space-x-4",children:[!l&&(0,n.jsx)("button",{onClick:k,className:"w-36 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium",children:e?"再開":"スタート"}),l&&(0,n.jsx)("button",{onClick:()=>{s(!1),i("pause.mp3")},className:"w-36 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 font-medium",children:"一時停止"}),(0,n.jsx)("button",{onClick:()=>N(!0),className:"w-36 px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors duration-200 font-medium",children:"ログを表示"})]})}),(0,n.jsx)("div",{className:"flex flex-col items-center space-y-4",children:(0,n.jsx)("input",{onInput:e=>{y.current=e.target.value,v(e.target.value)},value:j,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"preparation"===f[x].type?"やることを入力":"review"===f[x].type?"振り返りを入力":void 0})})]})}),w&&(0,n.jsxs)("div",{className:"fixed top-0 left-0 w-full h-full bg-opacity-75 bg-gray-900 flex flex-col items-center justify-center",children:[(0,n.jsx)("ul",{className:"max-w-xs w-full",children:g.map((e,t)=>(0,n.jsx)("li",{className:"p-2 rounded-md",children:(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsxs)("p",{className:"text-xs",children:[(0,n.jsx)("span",{className:"text-gray-50",children:e.label}),(0,n.jsxs)("span",{className:"text-gray-300",children:["（",d(e.time),"）"]}),e.comment&&(0,n.jsxs)("span",{className:"text-gray-50",children:["：",e.comment]})]})})},t))}),(0,n.jsxs)("div",{className:"mt-4 text-gray-50 text-xs",children:["合計作業時間：",d(g.reduce((e,t)=>"working"===t.type?e+t.time:e,0))]}),(0,n.jsx)("button",{onClick:()=>N(!1),className:"mt-4 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 font-medium",children:"閉じる"})]})]})}let i=e=>{new Audio("".concat(s,"/sounds/").concat(e)).play().catch(e=>{console.warn("Audio playback failed:",e)})},u=e=>{let t=new Audio("".concat(s,"/sounds/").concat(e));return t.preload="auto",t.load(),t};function d(e){let t=Math.floor(e/3600),l=Math.floor(e%3600/60),n=Math.floor(e%60),r=[];return t>0&&r.push("".concat(t,"時間")),l>0&&r.push("".concat(l,"分")),(n>0||0===r.length)&&r.push("".concat(n,"秒")),r.join("")}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(8360)),_N_E=e.O()}]);